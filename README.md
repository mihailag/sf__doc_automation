# sf.doc.automation

Скрипт позволяет получить и развернуть на удаленном сервере зеркало статьи «Как эффективно сообщать об ошибках» Саймона Тэтхема.

## Установка

Можно загрузить [исходный код][] в виде Zip архива или клонировать этот репозиторий.
Для удобства работы со скриптом желательно отредактировать [Makefile][], указав данные для подключения к целевому серверу, на котором будем разворачивать зеркало сайта, указав их в переменных `USER` и `IP`.

## Зависимости

Для работы скрипта требуется установленый Docker, а также make и wget.
Для разворачивания на удаленном сервере нужен доступ к нему по ssh.

## Использование

##### Сделать локальное зеркало сайта
Для начала нам нужно скачать весь сайт в папку mirror_doc, запустив следующую команду:
```bash
make sync
```
##### Развернуть контейнер
Далее мы упаковываем сохраненные у себя страницы в docker-контейнер и разворачиваем его на целевом сервере командой:
```bash
make deploy
```
Если вы не указывали данные для подключения в [Makefile][], их можно указать при вызове, например так:
```bash
make deploy USER=user IP=127.0.0.1
```
---
Если на целевом сервере не установлен Docker, мы можем развернуть его следующей командой:
```bash
make initial
```
Или так, явно указав данные для подлючения, например:
```bash
make initial USER=user IP=127.0.0.1
```

##### Добавить в расписание обновление зеркала
Добавить в расписание обновление локального зеркала сайта раз в неделю по субботам в три утра сорок пять минут:
```bash
make schedule
```
Изменить время запуска можно в [Makefile][]. Используется cron-формат.


[исходный код]: https://github.com/mihailag/sf__doc_automation/releases
[Makefile]: https://github.com/mihailag/sf__doc_automation/blob/master/Makefile
